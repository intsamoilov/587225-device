"use strict";var formLink=document.querySelector(".btn-write-us"),modal=document.querySelector(".modal"),modalForm=modal.querySelector(".modal-form"),formFeedback=modalForm.querySelector(".modal-form-feedback"),modalFormClose=modalForm.querySelector(".modal-close"),formName=modalForm.querySelector("[name=name]"),formEmail=modalForm.querySelector("[name=email]"),formText=modalForm.querySelector("[name=message]"),mapLink=document.querySelector(".small-map"),modalMap=modal.querySelector(".modal-map"),modalMapClose=modalMap.querySelector(".modal-close"),isStorageSupport=!0,storageName="",storageEmail="",sliderPopular=document.querySelector(".slides"),activeSlidePopular=sliderPopular.querySelector(".slide.active"),btnsPopular=sliderPopular.querySelectorAll(".slider-btn"),sliderServices=document.querySelector(".main-services"),activeSlideServices=sliderServices.querySelector(".main-services-info.active"),btnsServices=sliderServices.querySelectorAll(".services-btn"),activeBtnServices=sliderServices.querySelector(".selected");try{storageName=localStorage.getItem("name"),storageEmail=localStorage.getItem("email")}catch(e){isStorageSupport=!1}function init(){var e=new ymaps.Map("map",{center:[55.68698,37.529654],zoom:16}),a=new ymaps.Placemark([55.68698,37.529654],{hintContent:"Москва улица строителей, 15"});e.geoObjects.add(a)}formLink.addEventListener("click",function(e){e.preventDefault(),modal.classList.add("modal-show"),modalForm.classList.add("modal-show"),storageName&&storageEmail?(formName.value=storageName,formEmail.value=storageEmail,formText.focus()):formName.focus()}),modalFormClose.addEventListener("click",function(e){e.preventDefault(),modal.classList.remove("modal-show"),modalForm.classList.remove("modal-show"),modalForm.classList.remove("modal-error")}),formFeedback.addEventListener("submit",function(e){formName.value&&formEmail.value?isStorageSupport&&(localStorage.setItem("name",formName.value),localStorage.setItem("email",formEmail.value)):(e.preventDefault(),modalForm.classList.remove("modal-error"),modalForm.width=modalForm.offsetWidth,modalForm.classList.add("modal-error"))}),window.addEventListener("keydown",function(e){27==e.keyCode&&modalForm.classList.contains("modal-show")&&(e.preventDefault(),modal.classList.remove("modal-show"),modalForm.classList.remove("modal-show"),modalForm.classList.remove("modal-error"))}),mapLink.addEventListener("click",function(e){e.preventDefault(),modal.classList.add("modal-show"),modalMap.classList.add("modal-show")}),modalMapClose.addEventListener("click",function(e){e.preventDefault(),modal.classList.remove("modal-show"),modalMap.classList.remove("modal-show")}),window.addEventListener("keydown",function(e){27==e.keyCode&&modalMap.classList.contains("modal-show")&&(e.preventDefault(),modal.classList.remove("modal-show"),modalMap.classList.remove("modal-show"))}),ymaps.ready(init);var onBtnClickPopular=function(e){e.preventDefault();var a="."+e.target.dataset.key;activeSlidePopular.classList.remove("active"),(activeSlidePopular=sliderPopular.querySelector(a)).classList.add("active")};[].forEach.call(btnsPopular,function(e){e.addEventListener("click",onBtnClickPopular)});var onBtnClickServices=function(e){e.preventDefault();var a="."+e.target.dataset.key;activeSlideServices.classList.remove("active"),(activeSlideServices=sliderServices.querySelector(a)).classList.add("active"),activeBtnServices.classList.remove("selected"),(activeBtnServices=e.target).classList.add("selected")};[].forEach.call(btnsServices,function(e){e.addEventListener("click",onBtnClickServices)});